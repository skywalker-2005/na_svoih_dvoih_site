import GeoJSON from "ol/format/GeoJSON.js";
import Map from "ol/Map.js";
import View from "ol/View.js";
import { Tile as TileLayer, Vector as VectorLayer } from "ol/layer.js";
import { XYZ } from "ol/source";
import VectorSource from "ol/source/Vector";

const geoJsonObject = {
  type: "FeatureCollection",
  name: "cherez_pereval",
  crs: {
    type: "name",
    properties: { name: "urn:ogc:def:crs:OGC:1.3:CRS84" },
  },
  features: [
    {
      type: "Feature",
      geometry: {
        type: "MultiLineString",
        coordinates: [
          [
            [40.683950870731323, 43.93248559496282],
            [40.687570875428584, 43.929892443542414],
            [40.68750858447585, 43.929025119243327],
            [40.68698949320315, 43.928337232357805],
            [40.687425529872222, 43.927350250321915],
            [40.686387347326814, 43.926288478634483],
            [40.686636511137699, 43.925705243868443],
            [40.689838077868899, 43.922977088014136],
            [40.690802260381012, 43.919591427942734],
            [40.692007488521128, 43.918289199690413],
            [40.693935853545341, 43.917247396567909],
            [40.696346309825607, 43.916379213365381],
            [40.698756766105888, 43.912732705590905],
            [40.701890359270237, 43.91004109223995],
            [40.705747089318663, 43.907696684655392],
            [40.711773230019332, 43.906133694964772],
            [40.71695571102191, 43.904483827989495],
            [40.71840198479007, 43.900576065908936],
            [40.720450872628298, 43.897015437142507],
            [40.719004598860138, 43.894583665868332],
            [40.719125121674139, 43.889980398352385],
            [40.718884076046123, 43.886505998590657],
            [40.717437802277963, 43.884855587707861],
            [40.716353096951835, 43.882510188320722],
            [40.715940062045043, 43.880470099121965],
            [40.714346532416613, 43.878911269716681],
            [40.7139481500095, 43.87694216375219],
            [40.712126973291284, 43.875342217241041],
            [40.710305796573074, 43.873988382793812],
            [40.708370796309964, 43.871444731867918],
            [40.707175649088633, 43.869680523111782],
            [40.705183737053098, 43.868408619288012],
            [40.696946605946664, 43.866498112197775],
            [40.69392711055486, 43.864523297859989],
            [40.691360539471845, 43.861801989815923],
            [40.686356804251147, 43.858536256192039],
            [40.682815006678055, 43.855215801300119],
            [40.67976131004194, 43.848499326483598],
            [40.674875395424159, 43.83968968843979],
            [40.666172360011267, 43.833081606153272],
            [40.664187457197798, 43.826142332172971],
            [40.655942476280302, 43.820524233757247],
            [40.650751191998914, 43.814464907642893],
            [40.643727689735861, 43.801462824147698],
            [40.642048156586, 43.797605729718555],
            [40.637928045601939, 43.796294731414747],
            [40.635742187810393, 43.794123315086111],
            [40.63633663387273, 43.787240500477765],
            [40.637055213204917, 43.785173313705748],
            [40.634522424246235, 43.776967864576534],
            [40.632297759265121, 43.770250259718154],
            [40.628050671573888, 43.766160913401556],
            [40.622792372527599, 43.761487032412603],
            [40.618545284836387, 43.757689235230139],
            [40.615285689839766, 43.75824022272694],
            [40.612874590151598, 43.753900710283531],
            [40.610028701995098, 43.749675093151126],
            [40.60757807608254, 43.746020264762151],
            [40.603791433540991, 43.741394664100021],
            [40.600112458982927, 43.736300061008393],
            [40.597148987502962, 43.73050086981862],
            [40.597685614811532, 43.728475832776283],
            [40.598013553722325, 43.724511732304137],
            [40.597983741094069, 43.723714571725075],
            [40.596016107629346, 43.723369850351474],
            [40.593064657432251, 43.723068217522396],
            [40.589993956722147, 43.721969399373364],
            [40.587102131781549, 43.721086021149752],
            [40.585492249855868, 43.720245722459204],
            [40.583653400697344, 43.71832743062982],
            [40.57867624908463, 43.717055230629626],
            [40.572242370170621, 43.71512494456536],
            [40.568782642830072, 43.713370085094674],
            [40.566294067023712, 43.711044817142181],
            [40.564837339722423, 43.70920208789785],
            [40.563562703333808, 43.708280702030017],
            [40.562530854828729, 43.706613396360879],
            [40.561923885119853, 43.705297069651934],
            [40.559253218400841, 43.704682773962297],
            [40.558342763837537, 43.702576569521888],
            [40.55633976379827, 43.700952986428305],
            [40.551484006127325, 43.699329359366565],
            [40.544830580722802, 43.696611745205175],
            [40.540152871691163, 43.696406773881804],
            [40.533490680040018, 43.699891191091638],
            [40.525623623941335, 43.702350657798043],
            [40.518961432290219, 43.70650077908126],
            [40.511459741561048, 43.70866700926728],
            [40.509194074819362, 43.709119185329627],
            [40.503126604568585, 43.711375974367243],
            [40.501120704713806, 43.710444689134903],
            [40.497404533830611, 43.709738578240547],
            [40.49405130113243, 43.708712328554171],
            [40.492239473787457, 43.708223632051393],
            [40.491130743621127, 43.706777067051057],
            [40.49064398403592, 43.706425194610212],
            [40.488763788959638, 43.705772055864131],
            [40.488220485131535, 43.704919488407263],
            [40.487173631414009, 43.704430933051242],
            [40.486961610407917, 43.703472969815188],
            [40.486259290825267, 43.703281375331009],
            [40.485901505377498, 43.70253415099198],
            [40.48375227327729, 43.69828369581203],
            [40.482514981137072, 43.696799247707595],
            [40.482335663435599, 43.695619441781382],
            [40.481269514488623, 43.693173788011734],
            [40.478844160817282, 43.691889123199196],
            [40.478054510784759, 43.689747954025499],
            [40.477645584875056, 43.688422430039502],
            [40.475716687492941, 43.685180362579551],
            [40.474656168230723, 43.681835689310482],
            [40.474025265274832, 43.678522911907528],
            [40.473108110005072, 43.675079882407402],
            [40.471154635150178, 43.675965791831594],
            [40.470496169637677, 43.675215484941489],
            [40.469912247390731, 43.675372735665562],
            [40.467937198810112, 43.674755290258233],
            [40.465852371558846, 43.674509437130716],
            [40.464356734617724, 43.674509437130716],
            [40.462430535526885, 43.674148850721743],
            [40.461637394724768, 43.673706309894889],
            [40.460413691772942, 43.6735424050568],
            [40.457677348640381, 43.672402267758123],
            [40.456819591216494, 43.671600601528823],
            [40.455075163197115, 43.670039064391318],
            [40.453672260159095, 43.668598823910898],
            [40.45265616774882, 43.667591306482841],
            [40.452633334211512, 43.666980181114461],
            [40.451887417669887, 43.665397268675569],
            [40.450606680338112, 43.663999703167029],
            [40.450389606214074, 43.662900471481151],
            [40.449022039232688, 43.662068182673025],
            [40.448023498262138, 43.661392921010965],
            [40.447220324003233, 43.6608432838187],
            [40.446414570934607, 43.659867595770805],
            [40.445063071344883, 43.659273019025918],
            [40.443656781231262, 43.658929483111798],
            [40.443273247563916, 43.658599158263826],
            [40.442332676903497, 43.658235798832123],
            [40.44176752448638, 43.658015700270589],
            [40.437970909519933, 43.656739852677354],
            [40.438990393689018, 43.653473315303607],
            [40.43156272331418, 43.651049640494875],
            [40.426174021277525, 43.650733501787073],
            [40.423115568770235, 43.650259290605256],
            [40.42369813115257, 43.647624715858804],
            [40.426002662755906, 43.64779001148834],
            [40.423253547298081, 43.646152818776848],
            [40.418850096874472, 43.64551905477957],
            [40.41464127409391, 43.648142090112408],
            [40.413011267583528, 43.648124486230223],
            [40.405978577648625, 43.651730529667667],
            [40.401515808496953, 43.652879308857472],
            [40.396538104443145, 43.659367946244544],
            [40.395594057122601, 43.66098223513859],
          ],
        ],
      },
    },
  ],
};

let map = new Map({
  target: "map",
  layers: [
    new TileLayer({
      source: new XYZ({
        url:
          "https://server.arcgisonline.com/ArcGIS/rest/services/" +
          "World_Topo_Map/MapServer/tile/{z}/{y}/{x}",
      }),
    }),
    new VectorLayer({
      source: new VectorSource({
        features: new GeoJSON().readFeatures(geoJsonObject),
      }),
    }),
  ],
  view: new View({
    center: [0, 0],
    zoom: 2,
  }),
});

let default_view_button = document.getElementById("default-view");
if (default_view_button != null) {
  default_view_button.onclick = function () {
    map.setView(
      new View({
        projection: "EPSG:4326",
        center: [0, 0],
        zoom: 2,
      })
    );
  };
}

let cheres_pereval_button = document.getElementById(
  "cheres-pereval-route-view"
);
if (cheres_pereval_button != null) {
  cheres_pereval_button.onclick = function () {
    map.setView(
      new View({
        projection: "EPSG:4326",
        center: [40.478054510784759, 43.689747954025499],
        zoom: 10,
      })
    );
  };
}
